{"version":3,"file":"adminController.js","sourceRoot":"/","sources":["src/controllers/adminController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\nimport User, { User as UserModel } from \"../models/User\";\r\nimport { omit } from \"lodash\";\r\n\r\nexport const deleteUser = async (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) => {\r\n  const user = await User.find({ _id: req.params.id });\r\n\r\n  if (!user) {\r\n    return res.status(404).json({ message: \"User not found\" });\r\n  } else {\r\n    await User.findByIdAndDelete(req.params.id);\r\n    return res.status(200).json({ message: \"User deleted successfully\" });\r\n  }\r\n};\r\n\r\nexport const changeRole = async (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) => {\r\n  const user: UserModel | null = await User.findById(req.params.id);\r\n\r\n  if (!user) {\r\n    return res.status(404).json({ message: \"User not found\" });\r\n  } else {\r\n    user.role = req.body.role;\r\n    await user.save();\r\n    return res.status(200).json({ message: \"Role changed successfully\" });\r\n  }\r\n};\r\n\r\nexport const getUsers = async (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) => {\r\n  const users = await User.find();\r\n  if (!users) {\r\n    return res.status(404).json({ message: \"Users not found\" });\r\n  }\r\n\r\n  return res.status(200).json(users);\r\n};\r\n\r\nexport const findUser = async (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) => {\r\n  const users = await User.find({\r\n    username: { $regex: req.params.username, $options: \"i\" }\r\n  });\r\n\r\n  if (!users || users.length === 0) {\r\n    return res.status(404).json({ message: \"Users not found\" });\r\n  }\r\n\r\n  return res.status(200).json(users.map((user) => omit(user, \"password\")));\r\n};\r\n"]}