{"version":3,"file":"imageProcessor.js","sourceRoot":"/","sources":["utils/imageProcessor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,kDAA0B;AAC1B,4CAAoB;AAEpB,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,CAAO,QAAgB,EAAE,EAAE;IAC/C,MAAM,cAAc,GAAG,QAAQ,CAAC,OAAO,CAAC,iBAAiB,EAAE,cAAc,CAAC,CAAC;IAE3E,IAAA,eAAK,EAAC,QAAQ,CAAC;SACZ,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC;SAChB,MAAM,CAAC,cAAc,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;QACpC,IAAI,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,EAAE,CAAC;YAClB,IAAI,GAAG,EAAE,CAAC;gBACR,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC;YAC/B,CAAC;iBAAM,CAAC;gBACN,YAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;gBACxB,OAAO,CAAC,IAAI,CAAC,EAAE,aAAa,EAAE,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YAChF,CAAC;QACH,CAAC;IACH,CAAC,CAAC,CAAC;AACP,CAAC,CAAA,CAAC,CAAC","sourcesContent":["import sharp from \"sharp\";\r\nimport fs from \"fs\";\r\n\r\nprocess.on(\"message\", async (filePath: string) => {\r\n  const outputFilePath = filePath.replace(/(\\.[\\w\\d_-]+)$/i, \"-processed$1\");\r\n\r\n  sharp(filePath)\r\n    .resize(500, 500)\r\n    .toFile(outputFilePath, (err, info) => {\r\n      if (process?.send) {\r\n        if (err) {\r\n          process.send({ error: err });\r\n        } else {\r\n          fs.unlinkSync(filePath);\r\n          process.send({ processedPath: outputFilePath.replace(\"backend/\", \"\"), info });\r\n        }\r\n      }\r\n    });\r\n});"]}